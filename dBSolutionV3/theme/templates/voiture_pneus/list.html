{% extends "base.html" %}
{% load i18n static widget_tweaks %}

{% block title %}{% trans "Liste des Pneus" %}{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold mb-6 flex items-center">
    <img src="{% static 'icons/pneus.png' %}" alt="Pneus"
         style="width:60px; height:60px; margin-right:10px;">
    {% trans "Liste des Pneus" %}
</h1>

<div class="bg-white shadow-md rounded-lg p-4 mb-4">
    <div class="grid grid-cols-1 md:grid-cols-6 gap-3 items-end">
        <input id="search-manufacturier" type="text"
               class="border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
               placeholder="{% trans 'Manufacturier' %}">

        <input id="search-type_pneus" type="text"
               class="border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
               placeholder="{% trans 'Type embrayage' %}">


        <input id="search-pneus_largeur" type="text"
               class="border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
               placeholder="{% trans 'Largeur du pneus' %}">

        <input id="search-pneus_hauteur" type="text"
               class="border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
               placeholder="{% trans 'Hauteur du pneus' %}">

        <input id="search-pneus_jante" type="text"
               class="border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
               placeholder="{% trans 'Diamètre de la jante en pouces' %}">

        <input id="search-indice_vitesse" type="text"
               class="border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
               placeholder="{% trans 'Indice de vitesse' %}">

        <input id="search-indice_charge" type="text"
               class="border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
               placeholder="{% trans 'Indice de charge' %}">

        <div>
            <a href="{% url 'voiture_pneus:ajouter_pneus_simple' %}"
               class="bg-blue-600 text-white text-center px-4 py-2 rounded hover:bg-blue-700 transition w-full focus:outline-none focus:ring-2 focus:ring-blue-500">
                {% trans "Ajouter des pneus" %}
            </a>
        </div>
    </div>
</div>




<!-- Table -->
<table id="pneus-table" class="min-w-full table-auto border-collapse border border-gray-200 bg-white">
    <thead>
        <tr class="bg-gray-100">
            <th class="border px-4 py-2 cursor-pointer">{% trans "Nom du Manufacturier" %}</th>
            <th class="border px-4 py-2 cursor-pointer">{% trans "Type de pneus" %}</th>
            <th class="border px-4 py-2 cursor-pointer">{% trans "Largeur en millimètres" %}</th>
            <th class="border px-4 py-2 cursor-pointer">{% trans "hauteur en pourcent" %}</th>
            <th class="border px-4 py-2 cursor-pointer">{% trans "Jante en pouces" %}</th>
            <th class="border px-4 py-2 cursor-pointer">{% trans "Indice de vitesse" %}</th>
            <th class="border px-4 py-2 cursor-pointer">{% trans "Indice de charge" %}</th>
            <th class="border px-4 py-2 cursor-pointer text-center">{% trans "Info" %}</th>
        </tr>
    </thead>
    <tbody>
        {% for pneu in pneus %}
        <tr>
            <td class="border px-4 py-2">{{ pneu.manufacturier }}</td>
            <td class="border px-4 py-2">{{ pneu.get_type_pneus_display }}</td>
            <td class="border px-4 py-2">{{ pneu.pneus_largeur }}</td>
            <td class="border px-4 py-2">{{ pneu.pneus_hauteur }}</td>
            <td class="border px-4 py-2">{{ pneu.pneus_jante }}</td>
            <td class="border px-4 py-2">{{ pneu.get_indice_vitesse_display }}</td>
            <td class="border px-4 py-2">{{ pneu.get_indice_charge_display }}</td>
            <td class="border px-4 py-2 text-center">
                <a href="{% url 'voiture_pneus:detail' pneu.id %}"
                   class="text-blue-600 hover:text-blue-800 font-semibold">
                    {% trans "Info" %}
                </a>
            </td>
        </tr>
        {% endfor %}
    </tbody>

</table>

<!-- DataTables JS -->
<script>
$(document).ready(function() {
    var table = $('#pneus-table').DataTable({
        pageLength: 100,
        language: {
            search: "{% trans 'Recherche globale :' %}",
            lengthMenu: "{% trans 'Afficher _MENU_ éléments' %}",
            info: "{% trans 'Affichage de _START_ à _END_ sur _TOTAL_ pneus' %}",
            infoEmpty: "{% trans 'Aucun pneu trouvé' %}",
            zeroRecords: "{% trans 'Aucun pneu trouvé' %}",
            paginate: {
                first: "{% trans 'Premier' %}",
                last: "{% trans 'Dernier' %}",
                next: "{% trans 'Suivant' %}",
                previous: "{% trans 'Précédent' %}"
            }
        },
        order: [[0, "asc"]]
    });

    // Filtres par colonne
    $('#search-manufacturier').on('keyup', function () {
        table.column(0).search(this.value).draw();
    });
    $('#search-type_pneus').on('keyup', function () {
        table.column(1).search(this.value).draw();
    });
    $('#search-pneus_largeur').on('keyup', function () {
        table.column(2).search(this.value).draw();
    });
    $('#search-pneus_hauteur').on('keyup', function () {
        table.column(3).search(this.value).draw();
    });
     $('#search-pneus_jante').on('keyup', function () {
        table.column(4).search(this.value).draw();
    });
     $('#search-indice_vitesse').on('keyup', function () {
        table.column(4).search(this.value).draw();
    });
     $('#search-indice_charge').on('keyup', function () {
        table.column(4).search(this.value).draw();
    });
});
</script>
{% endblock %}
