{% extends "base.html" %}
{% load i18n static %}

{% block content %}
<div class="max-w-xl mx-auto p-6 bg-white rounded shadow mt-16 mb-16">

    <!-- Titre avec icône -->
    <h1 class="text-2xl font-bold mb-4 text-center flex items-center justify-center">
        <img src="{% static 'icons/engine.png' %}" alt="Moteur" style="width:60px; height:60px; margin-right:10px;">
        {% trans "Ajouter un moteur pour un nouveau véhicule" %} {{ exemplaire }}
    </h1>

    <!-- Messages Django -->
       {% for message in messages %}
            {% if 'success' in message.tags %}
                <div class="mb-3 px-4 py-2 rounded bg-green-100 text-green-800 border border-green-300">
                    {{ message }}
                </div>
            {% elif 'error' in message.tags %}
                <div class="mb-3 px-4 py-2 rounded bg-red-100 text-red-800 border border-red-300">
                    {{ message }}
                </div>
            {% else %}
                <div class="mb-3 px-4 py-2 rounded bg-gray-100 text-gray-800 border border-gray-300">
                    {{ message }}
                </div>
            {% endif %}
       {% endfor %}

    <!-- Formulaire -->
    <form method="post" class="flex flex-col space-y-4">
        {% csrf_token %}

        <!-- Motoriste -->
        <div class="flex flex-col">
            <label for="id_motoriste" class="mb-1 font-medium">{% trans "Motoriste" %}</label>
            <input type="text" id="id_motoriste" name="motoriste"
                   class="border border-gray-300 rounded px-4 py-2 w-full"
                   placeholder="{% trans 'Nom du motoriste' %}">
        </div>

        <!-- Code moteur -->
        <div class="flex flex-col">
            <label for="id_code_moteur" class="mb-1 font-medium">{% trans "Code moteur" %}</label>
            <input type="text" id="id_code_moteur" name="code_moteur"
                   class="border border-gray-300 rounded px-4 py-2 w-full"
                   placeholder="{% trans 'Ex: S14B23' %}">
        </div>

        <!-- Type moteur -->
        <div class="mb-4">
            <label for="id_type_moteur" class="block mb-1">{% trans "Type de moteur" %}</label>
            <select id="id_type_moteur" name="type_moteur"
                    class="border rounded px-3 py-2 w-full text-sm h-10">
                <option value="">{% trans "Sélectionner un type de moteur" %}</option>
                {% for value, label in TypeMoteur.choices %}
                    <option value="{{ value }}" {% if moteur.type_moteur == value %}selected{% endif %}>
                        {{ label }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Carburant -->
        <div class="mb-4">
            <label for="id_carburant" class="block mb-1">{% trans "Type de carburant" %}</label>
            <select id="id_carburant" name="carburant"
                    class="border rounded px-3 py-2 w-full text-sm h-10">
                <option value="">{% trans "Sélectionner un type de carburant" %}</option>
                {% for value, label in TypeCarburant.choices %}
                    <option value="{{ value }}" {% if moteur.carburant == value %}selected{% endif %}>
                        {{ label }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Cylindrée -->
        <div class="flex flex-col">
            <label for="id_cylindree_l" class="mb-1 font-medium">{% trans "Cylindrée (L)" %}</label>
            <input type="number" step="0.01" id="id_cylindree_l" name="cylindree_l"
                   class="border border-gray-300 rounded px-4 py-2 w-full"
                   placeholder="Ex: 2.3">
        </div>

        <!-- Distribution -->
        <div class="mb-4">
            <label for="id_distribution" class="block mb-1">{% trans "Type de distribution" %}</label>
            <select id="id_distribution" name="distribution"
                    class="border rounded px-3 py-2 w-full text-sm h-10">
                <option value="">{% trans "Sélectionner un type de distribution" %}</option>
                {% for value, label in TypeDistribution.choices %}
                    <option value="{{ value }}" {% if moteur.distribution == value %}selected{% endif %}>
                        {{ label }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Nombre de cylindres -->
        <div class="flex flex-col">
            <label for="id_nombre_cylindres" class="mb-1 font-medium">{% trans "Nombre de cylindres" %}</label>
            <input type="number" id="id_nombre_cylindres" name="nombre_cylindres"
                   class="border border-gray-300 rounded px-4 py-2 w-full"
                   placeholder="Ex: 4" min="1">
        </div>

        <!-- Puissance et couple -->
        <div class="flex flex-col">
            <label for="id_puissance_ch" class="mb-1 font-medium">{% trans "Puissance en Chevaux" %}</label>
            <input type="number" id="id_puissance_ch" name="puissance_ch"
                   class="border border-gray-300 rounded px-4 py-2 w-full" placeholder="120">
        </div>

        <div class="flex flex-col">
            <label for="id_puissance_tr_min" class="mb-1 font-medium">{% trans "Puissance à tr/min" %}</label>
            <input type="number" id="id_puissance_tr_min" name="puissance_tr_min"
                   class="border border-gray-300 rounded px-4 py-2 w-full" placeholder="3000">
        </div>

        <div class="flex flex-col">
            <label for="id_couple_nm" class="mb-1 font-medium">{% trans "Couple Nm" %}</label>
            <input type="number" id="id_couple_nm" name="couple_nm"
                   class="border border-gray-300 rounded px-4 py-2 w-full" placeholder="300">
        </div>

        <div class="flex flex-col">
            <label for="id_couple_tr_min" class="mb-1 font-medium">{% trans "Couple tr/min" %}</label>
            <input type="number" id="id_couple_tr_min" name="couple_tr_min"
                   class="border border-gray-300 rounded px-4 py-2 w-full" placeholder="4000">
        </div>

        <!-- Qualité et quantité d'huile -->
        <div class="flex flex-col">
            <label for="id_qualite_huile" class="mb-1 font-medium">{% trans "Qualité d'huile" %}</label>
            <input type="text" id="id_qualite_huile" name="qualite_huile"
                   class="border border-gray-300 rounded px-4 py-2 w-full" placeholder="0W30">
        </div>

        <div class="flex flex-col">
            <label for="id_quantite_huile" class="mb-1 font-medium">{% trans "Quantité d'huile (L)" %}</label>
            <input type="number" id="id_quantite_huile" name="quantite_huile_l"
                   class="border border-gray-300 rounded px-4 py-2 w-full" placeholder="6.50" step="0.01" min="0">
        </div>

        <!-- Intervalle entretien -->
        <div class="flex flex-col">
            <label for="id_intervalle_km_entretien" class="mb-1 font-medium">{% trans "Interval d'entretien" %}</label>
            <input type="number" id="id_intervalle_km_entretien" name="intervalle_km_entretien"
                   class="border border-gray-300 rounded px-4 py-2 w-full" placeholder="10000">
        </div>

        <button type="submit"
                class="mt-4 bg-blue-600 text-white px-4 py-2 rounded w-full hover:bg-blue-700 transition">
            {% trans "Ajouter" %}
        </button>
    </form>
</div>
{% endblock %}
