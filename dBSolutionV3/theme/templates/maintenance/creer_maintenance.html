{% extends 'base.html' %}
{% load i18n static %}

{% block content %}
<div class="p-6 max-w-4xl mx-auto">

    <h1 class="text-3xl font-bold mb-6 flex items-center gap-3">
        <img src="{% static 'icons/checkup.png' %}" alt="Maintenance" class="w-12 h-12">
        {% trans "CrÃ©er un check-up complet pour :" %} {{ exemplaire.voiture_marque.nom_marque }} {{ exemplaire.voiture_modele.nom_modele }}
    </h1>

    <!-- DÃ©tails de l'exemplaire -->
    <div class="bg-white shadow rounded p-4 mb-6">
        <h2 class="text-xl font-semibold mb-3">{% trans "DÃ©tails de l'exemplaire" %}</h2>
        <ul class="text-gray-700 space-y-1">
            <li><strong>{% trans "Immatriculation" %}:</strong>
            {% if exemplaire.pays == 'Belgique' %}
            <div class="flex items-center w-[14%] min-w-[180px] h-[40px] bg-white border-2 border-[#8B0000] rounded font-[Arial] mb-4">
                <div class="flex flex-col items-center justify-center bg-[#003399] text-white font-bold px-[6px] rounded-l text-[18px] leading-none">
                    <span>ðŸ‡ªðŸ‡º</span>
                    <span>B</span>
                </div>
                <input type="text" value="{{ exemplaire.immatriculation }}" readonly
                       class="w-full text-center border-none font-bold text-[#8B0000] text-[clamp(16px,4vw,24px)] bg-transparent outline-none p-0 m-0">
            </div>

            {% elif exemplaire.pays == 'Luxembourg' %}
            <div class="flex items-center w-[14%] min-w-[180px] h-[40px] bg-[#FFEB3B] border-2 border-black rounded font-[Arial] mb-4">
                <div class="flex flex-col items-center justify-center bg-[#003399] text-white font-bold px-[6px] rounded-l text-[18px] leading-none">
                    <span>ðŸ‡ªðŸ‡º</span>
                    <span>L</span>
                </div>
                <input type="text" value="{{ exemplaire.immatriculation }}" readonly
                       class="w-full text-center border-none font-bold text-black text-[clamp(16px,4vw,24px)] bg-transparent outline-none p-0 m-0">
            </div>

            {% elif exemplaire.pays == 'Allemagne' %}
            <div class="flex items-center w-[14%] min-w-[180px] h-[40px] bg-white border-2 border-black rounded font-[Arial] mb-4">
                <div class="flex flex-col items-center justify-center bg-[#003399] text-white font-bold px-[6px] rounded-l text-[18px] leading-none">
                    <span>ðŸ‡ªðŸ‡º</span>
                    <span>D</span>
                </div>
                <input type="text" value="{{ exemplaire.immatriculation }}" readonly
                       class="w-full text-center border-none font-bold text-black text-[clamp(16px,4vw,24px)] bg-transparent outline-none p-0 m-0">
            </div>
            {% endif %}</li>

            <li><strong>{% trans "KilomÃ¨tres total" %}:</strong> {{ exemplaire.kilometres_total }}</li>
            <li><strong>{% trans "KilomÃ¨tres depuis derniÃ¨re intervention" %}:</strong> {{ exemplaire.kilometres_derniere_intervention }}</li>
            <li><strong>{% trans "Marque" %}:</strong> {{ exemplaire.voiture_marque.nom_marque }}</li>
            <li><strong>{% trans "ModÃ¨le" %}:</strong> {{ exemplaire.voiture_modele.nom_modele }}</li>
            <li><strong>{% trans "Variante" %}:</strong> {{ exemplaire.voiture_modele.nom_variante }}</li>
        </ul>
    </div>

    <!-- Formulaire de check-up -->
    <form method="POST">
        {% csrf_token %}
        <input type="hidden" name="exemplaire_id" value="{{ exemplaire.id }}">

        <!-- AperÃ§u des contrÃ´les avec checkboxes -->
        <div class="bg-white shadow rounded p-4 mb-6">
            <h2 class="text-xl font-semibold mb-3">{% trans "AperÃ§u du check-up complet" %}</h2>

            <ul class="list-disc list-inside text-gray-700 space-y-1">
                {% for controle in controles %}
                <li>
                    <label class="flex items-center gap-2">
                        <input type="checkbox" name="controles" value="{{ controle.id }}" class="form-checkbox h-5 w-5 text-green-600">
                        <span>{{ controle.nom }}</span>
                    </label>
                </li>
                {% endfor %}
            </ul>
        </div>

        <!-- Bouton de crÃ©ation -->
        <div class="flex justify-end">
            <button type="submit"
                    class="bg-green-600 text-white font-bold py-2 px-4 rounded hover:bg-green-700 transition-colors">
                {% trans "CrÃ©er le check-up complet" %}
            </button>
        </div>
    </form>

    <p class="text-sm text-gray-500 mt-4">{% trans "Date actuelle" %}: {{ now|date:"Y-m-d H:i" }}</p>

</div>
{% endblock %}
